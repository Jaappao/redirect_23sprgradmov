{"version":3,"sources":["config/index.tsx","config/initialize.tsx","utils/browser.ts","components/ProgressBar/index.tsx","utils/formats.ts","components/TimeRow/index.tsx","components/Board/index.tsx","utils/hooks.ts","components/Clock/index.tsx","components/Footer/index.tsx","components/Header/index.tsx","api/index.tsx","components/App/hooks.ts","components/App/index.tsx","index.tsx"],"names":["config","color","main","sub","accent","font","GlobalStyle","createGlobalStyle","disableTouch","window","addEventListener","event","preventDefault","Wrapper","styled","div","Bar","p","rate","ProgressBar","status","type","pad2","n","padStart","pad","t","h","m","Row","TimeRange","Remain","Status","StRow","PeriodLabel","StatusLabel","TimeRow","st","period","nextBreak","data-nextspace","info","toLowerCase","start","end","progress","before","label","finish","getStatus","BoardFrame","Board","periods","map","includes","key","toHm","d","getHours","getMinutes","Frame","h2","SubSecond","span","Clock","useSeconds","now","getSeconds","useTime","hm","sec","SideBlock","Link","a","Footer","href","Title","Header","fetcher","url","fetch","r","json","initialPeriod","diffStatus","bt","et","nt","compare","usePeriods","useTimeHm","data","useSWR","Object","values","base","updatePeriod","MainWrap","App","useEffect","root","document","getElementById","ReactDOM","render"],"mappings":"2LASeA,G,YATA,CACdC,MAAO,CACNC,KAAM,UACNC,IAAK,UACLC,OAAQ,UACRC,KAAM,a,sUCAD,IAAMC,EAAcC,YAAH,IAIRP,EAAOC,MAAMC,KAClBF,EAAOC,MAAMI,MCVXG,EAAe,WAC3BC,OAAOC,iBACN,aACA,SAAAC,GACCA,EAAMC,oBAEP,I,6SCDF,IAAMC,EAAUC,IAAOC,IAAV,KAOPC,EAAMF,IAAOC,IAAV,KACC,SAAAE,GAAC,OAAa,IAATA,EAAEC,QAsCFC,EA5BK,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,OACtB,GAAe,OAAXA,EACH,OAAO,kBAACP,EAAD,MAER,OAAQO,EAAOC,MACd,IAAK,SACJ,OACC,kBAACR,EAAD,KACC,kBAACG,EAAD,CAAKE,KAAM,KAGd,IAAK,WACJ,OACC,kBAACL,EAAD,KACC,kBAACG,EAAD,CAAKE,KAAME,EAAOF,QAGrB,IAAK,SACJ,OACC,kBAACL,EAAD,KACC,kBAACG,EAAD,CAAKE,KAAM,KAGd,QACC,OAAO,OC7CGI,EAAO,SAAAC,GAAC,MAAI,UAAGA,GAAIC,SAAS,EAAG,MAE/BC,EAAM,SAACC,GACnB,MAAM,GAAN,OAAUJ,EAAKI,EAAEC,GAAjB,YAAuBL,EAAKI,EAAEE,K,8+BCG/B,IAAMf,EAAUC,IAAOC,IAAV,KAOPc,EAAMf,IAAOC,IAAV,KAOHe,EAAYhB,IAAOC,IAAV,KAGTgB,EAASjB,IAAOC,IAAV,KAKNiB,EAASlB,IAAOC,IAAV,KAKNkB,EAAQnB,IAAOC,IAAV,KAKLmB,EAAcpB,IAAOC,IAAV,KAMXoB,EAAcrB,IAAOC,IAAV,KACP,SAAAE,GAAC,OAAIA,EAAEhB,SA2BjB,IAoBemC,EApBC,SAAC,GAAD,IAPKC,EAQpBC,EADe,EACfA,OACAC,EAFe,EAEfA,UAFe,OAOf,kBAAC,EAAD,CAASC,iBAAgBD,GACxB,kBAACV,EAAD,KACC,kBAACK,EAAD,KAAcI,EAAOG,KAAKH,OAAOI,cAAjC,KACA,kBAACZ,EAAD,KACEL,EAAIa,EAAOG,KAAKE,OADlB,MAC6BlB,EAAIa,EAAOG,KAAKG,MAE7C,kBAACb,EAAD,KAnBS,QADSM,EAoBGC,EAAOlB,SAnBC,aAAZiB,EAAGhB,KACd,KAED,kCAAQ,IAAMgB,EAAGQ,SAAjB,SAiBL,kBAACb,EAAD,KAtCH,SAAmBK,GAClB,GAAW,OAAPA,EACH,OAAO,KAF4B,MAIX,CACxBS,OAAQ,CAAE7C,MAAO,QAAS8C,MAAO,IACjCF,SAAU,CAAE5C,MAAO,UAAW8C,MAAO,OACrCC,OAAQ,CAAE/C,MAAO,OAAQ8C,MAAO,QAC/BV,EAAGhB,MAJGpB,EAJ4B,EAI5BA,MAAO8C,EAJqB,EAIrBA,MAMf,OACC,kBAACd,EAAD,KACC,kBAACE,EAAD,CAAalC,MAAOA,GAAQ8C,IA0BnBE,CAAUX,EAAOlB,UAE3B,kBAAC,EAAD,CAAaA,OAAQkB,EAAOlB,W,mUCnF9B,IAAMP,EAAUC,IAAOC,IAAV,IAEEf,EAAOC,MAAME,KAKtB+C,EAAapC,IAAOC,IAAV,KA2BDoC,EAlBD,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,QAChB,OACC,kBAAC,EAAD,KACC,kBAACF,EAAD,KACC,iDACCE,EAAQC,KAAI,SAAAf,GAAM,OAClB,kBAAC,EAAD,CACCC,UAAW,CAAC,IAAK,KAAKe,SAAShB,EAAOG,KAAKH,QAC3CiB,IAAKjB,EAAOG,KAAKH,OACjBA,OAAQA,OAGV,oD,eChCEkB,EAAO,SAACC,GAAD,MAAoB,CAAE9B,EAAG8B,EAAEC,WAAY9B,EAAG6B,EAAEE,e,gXCGzD,IAAM9C,EAAUC,IAAOC,IAAV,IACEf,EAAOC,MAAMC,MAItB0D,EAAQ9C,IAAO+C,GAAV,KAMLC,EAAYhD,IAAOiD,KAAV,KAmBAC,EAbD,WAAO,IAAD,EDlBb,WAAoC,IAAD,EAC3BC,cAAPC,EADkC,oBAGzC,MAAO,CAACV,EAAKU,GAAMA,EAAIC,cCgBLC,GADC,mBACZC,EADY,KACRC,EADQ,KAGnB,OACC,kBAAC,EAAD,KACC,kBAACV,EAAD,KACEnC,EAAI4C,GACL,kBAACP,EAAD,SAAaxC,EAAKgD,O,8YC1BtB,IAAMzC,GAAMf,IAAOC,IAAV,MAMHwD,GAAYzD,IAAOC,IAAV,KAMTyD,GAAO1D,IAAO2D,EAAV,KAiBKC,GAZA,kBACd,kBAAC,GAAD,KACC,kBAACH,GAAD,KACC,kBAACC,GAAD,CAAMG,KAAK,oCAAoC,QAEhD,kBAAC,EAAD,MACA,kBAACJ,GAAD,KACC,kBAACC,GAAD,CAAMG,KAAK,qBAAqB,e,qRCxB3B1E,GAAUD,EAAVC,MAEFY,GAAUC,IAAOC,IAAV,KACEd,GAAMC,MAKf0E,GAAQ9D,IAAO+C,GAAV,MAYIgB,GANA,kBACd,kBAAC,GAAD,KACC,kBAACD,GAAD,sB,sDClBK,SAAeE,GAAtB,mC,gDAAO,WAAuCC,GAAvC,gBAAAN,EAAA,sEACUO,aAAMD,GADhB,cACAE,EADA,yBAGCA,EAAEC,QAHH,4C,sBCWP,SAASC,GAAc1C,GAGtB,MAAO,CACNA,OACArB,OAJc,MAchB,SAASgE,GAAW9C,EAAgB4B,GACnC,IAAMmB,EAA2B,GAAtB/C,EAAOG,KAAKE,MAAMhB,EAASW,EAAOG,KAAKE,MAAMf,EAClD0D,EAAyB,GAApBhD,EAAOG,KAAKG,IAAIjB,EAASW,EAAOG,KAAKG,IAAIhB,EAC9C2D,EAAa,GAARrB,EAAIvC,EAASuC,EAAItC,EAG5B,OAZe,SAACyD,EAAYC,EAAYC,GACxC,OAAIA,EAAKF,EAAW,SAChBE,EAAKD,EAAW,WACb,SAOYE,CAAQH,EAAIC,EAAIC,IAGlC,IAAK,SACJ,MAAO,CACNlE,KAAM,UAER,IAAK,WACJ,IAAMwB,EAAW0C,EAAKF,EAEtB,MAAO,CACNhE,KAAM,WACNwB,WACA3B,KAAM2B,GAAYyC,EAAKD,IAGzB,QACC,MAAO,CAAEhE,KAAM,WASX,SAASoE,KACf,IAAMvB,ELhDA,WAA4B,IAAD,EACnBD,YAAW,EAAG,KAArBC,EAD0B,oBAGjC,OAAOV,EAAKU,GK6CAwB,GAEJC,EAASC,aAAqB,aAAcd,IAA5Ca,KAER,OAAKA,EAEWE,OAAOC,OAAPD,OAAA,KAAAA,CAAA,GAAmBF,EAAKI,KAAK3C,QAA7B,GAAyCuC,EAAKlC,EAAEL,UAC9DC,IAAI8B,IACJ9B,KAAI,SAAAf,GAAM,OAdQ,SAACA,EAAgB4B,GAAjB,uBACjB5B,EADiB,CAEpBlB,OAAQgE,GAAW9C,EAAQ4B,KAYX8B,CAAa1D,EAAQ4B,MAJnB,G,uECtDnB,IAAM+B,GAAWnF,IAAOC,IAAV,MAiBCmF,OAff,WACC,IAAM9C,EAAUqC,KAIhB,OAFAU,oBAAU3F,EAAc,IAGvB,kBAACyF,GAAD,KACC,kBAAC3F,EAAD,MACA,kBAAC,GAAD,MACA,kBAAC,EAAD,CAAO8C,QAASA,IAChB,kBAAC,GAAD,QChBGgD,GAAOC,SAASC,eAAe,QAExB,OAATF,IACHG,IAASC,OAAO,kBAAC,GAAD,MAASJ,M","file":"static/js/main.ba2c586a.chunk.js","sourcesContent":["const config = {\n\tcolor: {\n\t\tmain: '#001a3c',\n\t\tsub: '#0a1325',\n\t\taccent: '#0a1357',\n\t\tfont: '#F2FCFC',\n\t},\n}\n\nexport default config\n","import 'normalize.css'\nimport 'moment/locale/ja'\nimport { createGlobalStyle } from 'styled-components'\nimport config from './'\n\nexport const GlobalStyle = createGlobalStyle`\nhtml, body {\n  height: 100%;\n  min-height: 100%;\n  background: ${config.color.main};\n  color: ${config.color.font};\n}\n\nbody {\n  font-family: 'Helvetica Neue', 'Segoe UI',\n  'Noto Sans Japanese', 'ヒラギノ角ゴ ProN W3', Meiryo, monospace;\n  margin: 0;\n}\n`\n","export const disableTouch = () => {\n\twindow.addEventListener(\n\t\t'touchmove',\n\t\tevent => {\n\t\t\tevent.preventDefault()\n\t\t},\n\t\ttrue,\n\t)\n}\n","import React from 'react'\n\nimport styled from 'styled-components'\nimport type { PeriodStatus } from '../../types'\n\nconst Wrapper = styled.div`\n\twidth: 100%;\n\theight: 5px;\n\tbackground: #004645;\n\tborder-radius: 5px;\n`\n\nconst Bar = styled.div<{rate: number}>`\n\twidth: ${p => p.rate * 100}%;\n\theight: 100%;\n\tbackground: #a6c0bf;\n\tborder-radius: 5px;\n`\n\ntype Props = {\n\tstatus: PeriodStatus,\n}\n\nconst ProgressBar = ({ status }: Props) => {\n\tif (status === null) {\n\t\treturn <Wrapper />\n\t}\n\tswitch (status.type) {\n\t\tcase 'before':\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<Bar rate={0} />\n\t\t\t\t</Wrapper>\n\t\t\t)\n\t\tcase 'progress':\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<Bar rate={status.rate} />\n\t\t\t\t</Wrapper>\n\t\t\t)\n\t\tcase 'finish':\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<Bar rate={1} />\n\t\t\t\t</Wrapper>\n\t\t\t)\n\t\tdefault:\n\t\t\treturn null\n\t}\n}\n\nexport default ProgressBar\n","import { Time } from '../types'\n\nexport const pad2 = n => `${n}`.padStart(2, '0')\n\nexport const pad = (t: Time) => {\n\treturn `${pad2(t.h)}:${pad2(t.m)}`\n}\n","\nimport React from 'react'\nimport styled from 'styled-components'\nimport ProgressBar from '../ProgressBar'\nimport type { Period, PeriodStatus } from '../../types'\nimport { pad } from '../../utils/formats'\n\n\nconst Wrapper = styled.div`\n\tmargin-top: 10px;\n\t&[data-nextspace='true'] {\n\t\tborder-bottom: #717b8a dashed;\n\t\tpadding-bottom: 5px;\n\t}\n`\nconst Row = styled.div`\n\tdisplay: flex;\n\tfont-size: 1.5em;\n\tfont-weight: 700;\n\tpadding: 2.5px 0;\n`\n\nconst TimeRange = styled.div`\n\tflex: auto;\n`\nconst Remain = styled.div`\n\tfont-size: 0.6em;\n\talign-self: flex-end;\n\tpadding-left: 5px;\n`\nconst Status = styled.div`\n\tfont-size: 0.6em;\n\talign-self: flex-end;\n`\n\nconst StRow = styled.div`\n\tmargin-left: 5px;\n\tdisplay: flex;\n`\n\nconst PeriodLabel = styled.div`\n\twidth: 50px;\n\tmargin-left: 5px;\n\tcolor: #a6ccff;\n`\n\nconst StatusLabel = styled.div`\n\tcolor: ${p => p.color};\n`\n\nfunction getStatus(st: PeriodStatus) {\n\tif (st === null) {\n\t\treturn null\n\t}\n\tconst { color, label } = {\n\t\tbefore: { color: 'black', label: '' },\n\t\tprogress: { color: '#ebe971', label: 'Now' },\n\t\tfinish: { color: 'gray', label: 'Fin' },\n\t}[st.type]\n\n\treturn (\n\t\t<StRow>\n\t\t\t<StatusLabel color={color}>{label}</StatusLabel>\n\t\t</StRow>\n\t)\n}\n\nfunction remainLabel(st: PeriodStatus) {\n\tif (st === null || st.type !== 'progress') {\n\t\treturn null\n\t}\n\treturn <span>({100 - st.progress}min)</span>\n}\n\nconst TimeRow = ({\n\tperiod,\n\tnextBreak,\n}: {\n\tperiod: Period,\n\tnextBreak: boolean,\n}) => (\n\t<Wrapper data-nextspace={nextBreak}>\n\t\t<Row>\n\t\t\t<PeriodLabel>{period.info.period.toLowerCase()}.</PeriodLabel>\n\t\t\t<TimeRange>\n\t\t\t\t{pad(period.info.start)} - {pad(period.info.end)}\n\t\t\t</TimeRange>\n\t\t\t<Remain>{remainLabel(period.status)}</Remain>\n\t\t\t<Status>{getStatus(period.status)}</Status>\n\t\t</Row>\n\t\t<ProgressBar status={period.status} />\n\t</Wrapper>\n)\n\nexport default TimeRow\n","import React from 'react'\nimport styled from 'styled-components'\nimport TimeRow from '../TimeRow'\nimport type { Period } from '../../types'\nimport config from '../../config'\n\n\nconst Wrapper = styled.div`\n\tpadding: 10px;\n\tbackground: ${config.color.sub};\n\n\tdisplay: flex;\n\tjustify-content: center;\n`\nconst BoardFrame = styled.div`\n\tmin-width: 300px;\n\twidth: 100%;\n\tmax-width: 600px;\n\t> p {\n\t\tfont-weight: 800;\n\t}\n`\n\nconst Board = ({ periods }: { periods: Period[] }) => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<BoardFrame>\n\t\t\t\t<p>開館 08:00</p>\n\t\t\t\t{periods.map(period => (\n\t\t\t\t\t<TimeRow\n\t\t\t\t\t\tnextBreak={['2', '5'].includes(period.info.period)}\n\t\t\t\t\t\tkey={period.info.period}\n\t\t\t\t\t\tperiod={period}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t\t<p>閉館 22:30</p>\n\t\t\t</BoardFrame>\n\t\t</Wrapper>\n\t)\n}\n\nexport default Board\n","import { useSeconds } from 'use-seconds'\nimport { Time } from '../types'\n\nconst toHm = (d: Date): Time => ({ h: d.getHours(), m: d.getMinutes() })\n\nexport function useTime(): [Time, number] {\n\tconst [now] = useSeconds()\n\n\treturn [toHm(now), now.getSeconds()]\n}\n\nexport function useTimeHm(): Time {\n\tconst [now] = useSeconds(0, 60 * 1000)\n\n\treturn toHm(now)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport config from '../../config'\nimport { pad, pad2 } from '../../utils/formats'\nimport { useTime } from '../../utils/hooks'\n\nconst Wrapper = styled.div`\n\tbackground: ${config.color.main};\n\ttext-align: center;\n`\n\nconst Frame = styled.h2`\n\tfont-size: 2em;\n\tfont-weight: 400;\n\tmargin: 0;\n`\n\nconst SubSecond = styled.span`\n\tfont-size: 0.7em;\n\tfont-weight: 700;\n\tcolor: gray;\n`\n\nconst Clock = () => {\n\tconst [hm, sec] = useTime()\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Frame>\n\t\t\t\t{pad(hm)}\n\t\t\t\t<SubSecond>.{pad2(sec)}</SubSecond>\n\t\t\t</Frame>\n\t\t</Wrapper>\n\t)\n}\n\nexport default Clock\n","import React from 'react'\nimport styled from 'styled-components'\nimport Clock from '../Clock'\n\nconst Row = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-top: 10px;\n`\n\nconst SideBlock = styled.div`\n\twidth: 30px;\n\tpadding: 10px 15px 0;\n\ttext-align: center;\n`\n\nconst Link = styled.a`\n\tcolor: #a6ccff;\n\ttext-decoration: none;\n`\n\nconst Footer = () => (\n\t<Row>\n\t\t<SideBlock>\n\t\t\t<Link href=\"https://github.com/elzup/dentime\">{'</>'}</Link>\n\t\t</SideBlock>\n\t\t<Clock />\n\t\t<SideBlock>\n\t\t\t<Link href=\"https://elzup.com\">{\"'ω'\"}</Link>\n\t\t</SideBlock>\n\t</Row>\n)\n\nexport default Footer\n","import React from 'react'\nimport styled from 'styled-components'\nimport config from '../../config'\n\nconst { color } = config\n\nconst Wrapper = styled.div`\n\tbackground: ${color.main};\n\tcolor: white;\n\ttext-align: center;\n\tpadding: 10px;\n`\nconst Title = styled.h2`\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 20px;\n`\n\nconst Header = () => (\n\t<Wrapper>\n\t\t<Title>Dendai Time</Title>\n\t</Wrapper>\n)\n\nexport default Header\n","import fetch from 'unfetch'\n\nexport async function fetcher<JSON = unknown>(url: string): Promise<JSON> {\n\tconst r = await fetch(url)\n\n\treturn r.json()\n}\n","import { useEffect, useState } from 'react'\nimport useSWR from 'swr'\nimport { fetcher } from '../../api'\nimport {\n\tTimeResponse,\n\tPeriod,\n\tPeriodInfo,\n\tPeriodStatusType,\n\tTime,\n\tPeriodStatus,\n} from '../../types'\nimport { useTimeHm } from '../../utils/hooks'\n\nfunction initialPeriod(info: PeriodInfo): Period {\n\tconst status = null\n\n\treturn {\n\t\tinfo,\n\t\tstatus,\n\t}\n}\n\nconst compare = (bt: number, et: number, nt: number): PeriodStatusType => {\n\tif (nt < bt) return 'before'\n\tif (nt < et) return 'progress'\n\treturn 'finish'\n}\n\nfunction diffStatus(period: Period, now: Time): PeriodStatus {\n\tconst bt = period.info.start.h * 60 + period.info.start.m\n\tconst et = period.info.end.h * 60 + period.info.end.m\n\tconst nt = now.h * 60 + now.m\n\tconst statusType = compare(bt, et, nt)\n\n\tswitch (statusType) {\n\t\tcase 'before':\n\t\t\treturn {\n\t\t\t\ttype: 'before',\n\t\t\t}\n\t\tcase 'progress':\n\t\t\tconst progress = nt - bt\n\n\t\t\treturn {\n\t\t\t\ttype: 'progress',\n\t\t\t\tprogress,\n\t\t\t\trate: progress / (et - bt),\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn { type: 'finish' }\n\t}\n}\n\nconst updatePeriod = (period: Period, now: Time): Period => ({\n\t...period,\n\tstatus: diffStatus(period, now),\n})\n\nexport function usePeriods(): Period[] {\n\tconst now = useTimeHm()\n\n\tconst { data } = useSWR<TimeResponse>('/time.json', fetcher)\n\n\tif (!data) return []\n\n\tconst periods = Object.values({ ...data.base.periods, ...data.d.periods })\n\t\t.map(initialPeriod)\n\t\t.map(period => updatePeriod(period, now))\n\n\treturn periods\n}\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { GlobalStyle } from '../../config/initialize'\nimport { disableTouch } from '../../utils/browser'\nimport Board from '../Board'\nimport Footer from '../Footer'\nimport Header from '../Header'\nimport { usePeriods } from './hooks'\n\nconst MainWrap = styled.div``\n\nfunction App() {\n\tconst periods = usePeriods()\n\n\tuseEffect(disableTouch, [])\n\n\treturn (\n\t\t<MainWrap>\n\t\t\t<GlobalStyle />\n\t\t\t<Header />\n\t\t\t<Board periods={periods} />\n\t\t\t<Footer />\n\t\t</MainWrap>\n\t)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './config/initialize'\n\nconst root = document.getElementById('root')\n\nif (root !== null) {\n\tReactDOM.render(<App />, root)\n}\n"],"sourceRoot":""}